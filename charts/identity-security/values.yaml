identity-security:
  # Keycloak Configuration
  keycloak:
    proxy: edge
    logsCertsLevel: TRACE
    logLevel: DEBUG
    admin:
      username: admin
      password: admin
      existingSecret:
        enabled: false
        name: keycloak-secrets
        passwordKey: keycloakAdminPassword
    relativePath: /keycloak
    hostname:
      url:
        # if deployed locally set to false
        externalService: true
        scheme: http
        # change by the external url or set to localhost if deployed locally
        host: example.org
        # internalPort is only used if externalService is false
        internalPort: 30001
        path: /
      adminUrl:
        # if deployed locally set to false
        externalService: true
        scheme: http
        # change by the external url or set to localhost if deployed locally
        host: example.org
        # internalPort is only used if externalService is false
        internalPort: 30002
        path: /
    https:
      trustStoreFile: /opt/keycloak/truststore/truststore.jks
      trustStorePassword: pempas
      existingSecret:
        enabled: false
        name: keycloak-secrets
        trustStorePasswordKey: keycloakTrustStorePassword
      clientAuth: request
    db:
      host: postgres-keycloak
      port: 5432
      externalService: false
      name: postgres_keycloak
      username: postgres
      password: postgres
      existingSecret:
        enabled: false
        name: keycloak-secrets
        passwordKey: keycloakDbPassword
      type: postgres
    mail:
      host: smtp.ionos.de
      port: 587
      from: example@example.org
      fromDisplayName: Example
      replyTo: example@example.org
      username: user
      password: password
      existingSecret:
        enabled: false
        name: mail-secret
        userKey: mail-username
        passwordKey: mail-password
      properties:
        mail:
          smtp:
            auth: true
            starttls:
              enable: true
            ssl:
              enable: false

  # Issuer API Configuration
  issuerApi:
    url: http://issuer-api:8080
    externalUrl:
      # if deployed locally set to false
      externalService: true
      scheme: http
      # change by the external url or set to localhost if deployed locally
      host: example.org
      # internalPort is only used if externalService is false
      internalPort: 30001
      path: /

  # Pre-authorization Configuration
  preAuth:
    lifespan: 10
    lifespanTimeUnit: MINUTES

  # Token Configuration
  token:
    expiration: 2592000

postgres-keycloak:
  # -- should the postgresql deployment be enabled
  enabled: true
  # -- overrides the generated name, provides stable service names - this should be avoided if multiple instances are available in the same namespace
  fullnameOverride: postgres-keycloak
  # -- overrides the generated name, provides stable service names - this should be avoided if multiple instances are available in the same namespace
  nameOverride: postgres-keycloak
  ## auth configuration for the database
  auth:
    # -- username to be used
    username: postgres
    # -- should the default postgres user be enabled
    enablePostgresUser: true
    # -- password to be used
    password: postgres
  ## configuration of the postgres primary replica
  primary:
    ## provide db initialization
    initdb:
      ## provide scripts for initialization
      scripts:
        # -- create the database
        create.sh: |
          psql postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432 -c "CREATE DATABASE postgres_keycloak;"